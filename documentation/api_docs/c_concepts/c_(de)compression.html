
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Compression and Decompression &#8212; Intel® QPL v0.1.20-beta documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=1cee231a2b06fec83dfdf5e1f90e99acd3529254" type="text/css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Compression Styles" href="c_compression_styles.html" />
    <link rel="prev" title="Job Structure" href="c_job_structure.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Intel® QPL v0.1.20-beta documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  About
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../introduction_docs/introduction.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../introduction_docs/system_requirements.html">
   System Requirements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../introduction_docs/issue_reporting.html">
   Issue Reporting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../introduction_docs/license.html">
   License
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Get Started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../get_started_docs/installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../get_started_docs/quick_start.html">
   Quick start
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../get_started_docs/code_samples_and_examples.html">
   Code Samples and Examples
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../get_started_docs/testing.html">
   Test Library
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Developer Reference
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../high_level_api.html">
   High-level C++ API
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../concepts/index_api_design.html">
     C++ API Overview
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../concepts/abstraction_layers.html">
       Abstraction Layers
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../concepts/compression_styles.html">
       Compression Styles
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../concepts/compression_streams.html">
       Compression Streams
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../concepts/deflate_block.html">
       Deflate Block
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../concepts/status_codes.html">
       Status Codes
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../concepts/exceptions.html">
       Exceptions
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../concepts/asynchronous_execution.html">
       Asynchronous Execution
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../concepts/execution_result.html">
       Execution Result
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../operations/index_operations.html">
     Operations
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../operations/compression_operations/index_compression_operations.html">
       Compression Operations
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
      <label for="toctree-checkbox-4">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../operations/compression_operations/deflate_operation.html">
         deflate_operation
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../operations/compression_operations/inflate_operation.html">
         inflate_operation
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../operations/compression_operations/zero_compress_operation.html">
         zero_compress_operation
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../operations/compression_operations/zero_decompress_operation.html">
         zero_decompress_operation
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../operations/analytics_operations/index_analytics_operations.html">
       Analytics Operations
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
      <label for="toctree-checkbox-5">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../operations/analytics_operations/scan_operation.html">
         scan_operation
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../operations/analytics_operations/scan_range_operation.html">
         scan_range_operation
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../operations/analytics_operations/extract_operation.html">
         extract_operation
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../operations/analytics_operations/find_unique_operation.html">
         find_unique_operation
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../operations/mask_operations/index_mask_operations.html">
       Operations with Mask
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
      <label for="toctree-checkbox-6">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../operations/mask_operations/select_operation.html">
         select_operation
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../operations/mask_operations/expand_operation.html">
         expand_operation
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../operations/mask_operations/set_membership_operation.html">
         set_membership_operation
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../operations/copy_operation.html">
       copy_operation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../operations/crc_operation.html">
       crc_operation
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../low_level_api.html">
   Low-level C API
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="index_c_api_design.html">
     C API Overview
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="c_job_structure.html">
       Job Structure
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../concepts/status_codes.html">
       Status Codes
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       Compression and Decompression
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="c_compression_styles.html">
       Compression Styles
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="c_compression_streams.html">
       Compression Streams
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="c_filtering_unit.html">
       Filtering Unit
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="c_parser.html">
       Parser
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="c_output_modification.html">
       Output Modification
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../c_operations/index_c_operations.html">
     Operations
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../c_operations/c_qpl_scan.html">
       qpl_scan
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../c_operations/c_qpl_set_membership.html">
       qpl_set_membership
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../c_operations/c_qpl_extract.html">
       qpl_extract
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../c_operations/c_qpl_select.html">
       qpl_select
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../c_operations/c_qpl_expand_rle.html">
       qpl_expand_rle
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../c_operations/c_qpl_find_unique.html">
       qpl_find_unique
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../c_operations/c_qpl_expand.html">
       qpl_expand
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../c_operations/c_qplZeroCompress.html">
       qplZeroCompress
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../c_operations/c_qpl_crc64.html">
       qpl_crc64
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../c_operations/c_qpl_memcpu.html">
       qpl_memcpy
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../c_operations/c_qpl_gather_deflate_statistics.html">
       qpl_gather_deflate_statistics
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Developer Guide
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../dev_guide_docs/high_level_developer_guide.html">
   High-level C++ API Developer Guide
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../dev_guide_docs/use_cases/use_library.html">
     Library Usage Scenarios
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../dev_guide_docs/use_cases/integrate_with_other_projects.html">
     Integrating into Other Projects
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../dev_guide_docs/use_cases/select_execution_path.html">
     Selecting Execution Path
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../dev_guide_docs/use_cases/set_parser.html">
     Setting Parser
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../dev_guide_docs/use_cases/create_huffman_table.html">
     Creating Huffman Table
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../dev_guide_docs/use_cases/use_deflate_block.html">
     Building Deflate Block
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../dev_guide_docs/use_cases/use_execution_result.html">
     Using execution_result
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../dev_guide_docs/use_cases/use_exceptions.html">
     Using Exceptions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../dev_guide_docs/use_cases/use_compression_streams.html">
     Using Compression Streams
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../dev_guide_docs/use_cases/build_custom_operation.html">
     Building Custom Operations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../dev_guide_docs/use_cases/chain_operations.html">
     Chaining Operations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../dev_guide_docs/use_cases/optimize_hw_path.html">
     Hardware Path Optimizations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../dev_guide_docs/low_level_developer_guide.html">
   Low-level C API Developer Guide
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../dev_guide_docs/c_use_cases/c_use_library.html">
     Library Usage Scenarios
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../dev_guide_docs/c_use_cases/c_optimize_hw_path.html">
     Hardware Path Optimizations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../dev_guide_docs/c_use_cases/c_compress_dictionary.html">
     Compressing with Preset Dictionary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../dev_guide_docs/c_use_cases/c_use_huffman_tables.html">
     Huffman Tables
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../dev_guide_docs/c_use_cases/c_use_indices.html">
     Creating and Using Indices
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/intel/qpl/issues/new?title=Issue%20on%20page%20%2Fdocumentation/api_docs/c_concepts/c_(de)compression.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/intel/qpl/edit/develop/doc/source/documentation/api_docs/c_concepts/c_(de)compression.rst"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../../_sources/documentation/api_docs/c_concepts/c_(de)compression.rst.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.rst</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#decompression">
   Decompression
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#advanced-decompress-features">
   Advanced Decompress Features
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#compression">
   Compression
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#compression-and-output-overflow">
   Compression and Output Overflow
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#compression-and-decompression-with-canned-mode">
   Compression and Decompression with Canned Mode
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dictionary-compression">
   Dictionary Compression
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Compression and Decompression</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#decompression">
   Decompression
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#advanced-decompress-features">
   Advanced Decompress Features
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#compression">
   Compression
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#compression-and-output-overflow">
   Compression and Output Overflow
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#compression-and-decompression-with-canned-mode">
   Compression and Decompression with Canned Mode
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dictionary-compression">
   Dictionary Compression
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <blockquote>
<div></div></blockquote>
<section id="compression-and-decompression">
<h1>Compression and Decompression<a class="headerlink" href="#compression-and-decompression" title="Permalink to this headline">#</a></h1>
<section id="decompression">
<h2>Decompression<a class="headerlink" href="#decompression" title="Permalink to this headline">#</a></h2>
<p>Decompression of a large stream can be accomplished through linking
multiple jobs. The first job is specified with the flag <code class="docutils literal notranslate"><span class="pre">QPL_FLAG_FIRST</span></code>,
and the last job is specified with the flag <code class="docutils literal notranslate"><span class="pre">QPL_FLAG_LAST</span></code>. If the stream
consists of a single job, then both flags should be specified.</p>
<p>The decompressor expects the stream to be formatted with DEFLATE data.
The GZIP standard defines an encapsulation layer around a DEFLATE
stream. In particular, a GZIP stream consists of a GZIP header, a
DEFLATE stream, and a GZIP trailer. The decompressor looks at a raw
DEFLATE stream by default. If the <code class="docutils literal notranslate"><span class="pre">QPL_FLAG_GZIP_MODE</span></code> flag is specified,
then the library will skip over the GZIP header on the FIRST job, and
then start parsing the DEFLATE stream.</p>
<p>In general, the application may not know how much data a given
compressed stream will uncompress to. To handle this, the
Intel® Query Processing Library (Intel® QPL)
allows a decompress job to complete “successfully” but with not all
input processed. This is called euphemistically <em>output overflow</em>
although no actual overflow occurs (The label comes from the fact that
the output buffer would have overflowed if the decompressed did not stop
early).</p>
<p>If the job completes with the status <code class="docutils literal notranslate"><span class="pre">QPL_MORE_OUTPUT_NEEDED</span></code>, then the
output buffer filled up before the input is completely processed (Note
that output buffer may be considered “full” even though the bytes
remaining in it are not zero). In this case, the remaining data from
this job needs to be processed before a new job (if exists) is
submitted. Due to the update of the input buffer parameters, these do
not need to be reset, but the output buffer parameters need to be reset.
They can be pointed to a new buffer, or the current output buffer could
be processed (e.g. written to disk) and then reused.</p>
<p><strong>Note</strong> that the <code class="docutils literal notranslate"><span class="pre">available_in</span></code> job field could be 0, and the status could
still be <code class="docutils literal notranslate"><span class="pre">QPL_MORE_OUTPUT_NEEDED</span></code>. In this case, the subsequent job will
be submitted with a zero-length input buffer.</p>
<p>For decompression, the CRC and checksum fields are calculated on the
output of the decompressor, that is, on the uncompressed data.</p>
<p>Normally, the hardware will only write complete qwords (8 bytes) on all,
but a LAST job. If the flag <code class="docutils literal notranslate"><span class="pre">QPL_FLAG_DECOMP_FLUSH_ALWAYS</span></code> is used, then
even on a non-LAST job, all the processed data will be written to the
output.</p>
<p>In case when the application passes in a tiny input buffer, the library
will normally copy the data into internal buffer, and try to combine it
with other small input buffers before submitting it to the hardware. If
the flag <code class="docutils literal notranslate"><span class="pre">QPL_FLAG_NO_BUFFER</span></code> is specified, then this option will be
ignored.</p>
</section>
<section id="advanced-decompress-features">
<h2>Advanced Decompress Features<a class="headerlink" href="#advanced-decompress-features" title="Permalink to this headline">#</a></h2>
<p>By default, the system expects a DEFLATE stream to end cleanly during
decompression; otherwise it reports an error. The library expects the
stream to end at the end of a block (i.e. with an “EOB”). That block
mast be marked as a final (i.e. the “b_final” bit is set in the block
header). When the library detects a b_final EOB, it stops processing.</p>
<p>The application can change this behavior by setting the job
<code class="docutils literal notranslate"><span class="pre">decomp_end_processing</span></code> field. This holds an enumeration. The
enumeration determines the conditions for stopping the processing, as
well as the expectations for how the stream should end. The meaning of
the enumeration values is:</p>
<table class="table">
<colgroup>
<col style="width: 60%" />
<col style="width: 16%" />
<col style="width: 24%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Stop on</p></th>
<th class="head"><p>Expect to End
on</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>qpl_stop_and_check_for_bfinal_eob
(default)</p></td>
<td><p>b_final
EOB</p></td>
<td><p>b_final EOB</p></td>
</tr>
<tr class="row-odd"><td><p>qpl_dont_stop_or_check</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>qpl_stop_and_check_for_any_eob</p></td>
<td><p>EOB</p></td>
<td><p>EOB</p></td>
</tr>
<tr class="row-odd"><td><p>qpl_stop_on_any_eob</p></td>
<td><p>EOB</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>qpl_stop_on_bfinal_eob</p></td>
<td><p>b_final
EOB</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>qpl_check_for_any_eob</p></td>
<td></td>
<td><p>EOB</p></td>
</tr>
<tr class="row-even"><td><p>qpl_check_for_bfinal_eob</p></td>
<td></td>
<td><p>b_final EOB</p></td>
</tr>
</tbody>
</table>
<p>In particular, on a non-Last job (i.e. a job without the LAST flag set),
only the specified “stop” condition will be applied. There will be no
expectation as to the end of that job’s buffer. That expectation only
applies for a LAST job. To apply the expectation also to a non-LAST job,
add (or “or”) in the value <em>qpl_check_on_nonlast_block</em>.</p>
<p>For example, given a value of <em>qpl_stop_and_check_for_any_eob</em>, the
processing stops when EOB on any job appears. The library returns error
if the LAST job does not end with an EOB. In contrast, the values
(<em>qpl_stop_and_check_for_any_eob</em> + <em>qpl_check_for_bfinal_eob</em>) allow the
library to stop on an EOB on any job. In this case, an error is returned
on any job that is not ended with EOB.</p>
<p>For example, in some non-standard use cases, there may be multiple
blocks, so the processing should not stop on an EOB, and the stream
might be expected to end with an EOB, but that block is not expected to
have the <code class="docutils literal notranslate"><span class="pre">b_final</span></code> flag set. In this case, the user can specify
<em>qpl_check_for_any_eob</em>. Then the user gets an error if the stream does
not end with an EOB, but the processing will not stop until it reaches
the end of the bit stream.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ignore_start_bits</span></code> and <code class="docutils literal notranslate"><span class="pre">ignore_start_bytes</span></code> fields can be used
to start and stop decompression on a bit granularity rather than a byte granularity.</p>
</section>
<section id="compression">
<h2>Compression<a class="headerlink" href="#compression" title="Permalink to this headline">#</a></h2>
<p>At a high level, compression is very similar to decompression. The
application specifies the input buffer and the output buffer, submits
one or more jobs, marks the FIRST job and the LAST job, etc. Compression
has more possible variations, and ways to deal with <em>output overflow</em>
(for more information on <em>output overflow</em>, refer to the decompression part).</p>
<p>The DEFLATE standard organizes the compressed data into a series of
“blocks”. Each block is defined by a type, with the three types being:</p>
<ul class="simple">
<li><p><em>Stored Block</em>: the input data is stored in an uncompressed form.</p></li>
<li><p><em>Fixed Block</em>: the input data is compressed with a fixed Huffman table
defined by the standard. This is usually a suboptimal code, but in
this case the block header is very small, as it doesn’t need to
define a set of Huffman codes.</p></li>
<li><p><em>Dynamic Block</em>: the input data is compressed with a Huffman table that
is optimized for that particular block. This results in a more
efficient code, but requires two passes: one pass to analyze the
data, and another pass to do the compression after the optimal
Huffman table is generated.</p></li>
</ul>
<p>The library extends this with what it calls a <em>Static Block</em>. From the
DEFLATE point of view, this is a Dynamic Block, but from the library
point of view, the Huffman Table is provided by the application, so that
the compression can happen in one pass. Application must make sure that
the table is appropriate for the data; otherwise, the compression ratio
may suffer.</p>
<p>The main reason to start a new block in the middle of the stream is to
change the type of block generated, or to start using a different
Huffman table.</p>
<p>The Intel QPL does not save history state between jobs. The compressed
form of the data from one job will never reference data from an earlier
job. For example, when 10 jobs of 1,000 bytes are submitted, each will
generate different output. In this case, one job with all 10,000 bytes
can be submitted. In general, submitting very small buffers will result
in a worse compression ratio than submitting fewer large buffers.</p>
</section>
<section id="compression-and-output-overflow">
<h2>Compression and Output Overflow<a class="headerlink" href="#compression-and-output-overflow" title="Permalink to this headline">#</a></h2>
<p>Compression job cannot be partially completed. Each compression job will
complete successfully with all the input processed, or it will fail with
an error and conceptually no output generated.</p>
<p>To complete the compression in any case, the library can specify minimum
size for the output buffer. The size of the output buffer must be bigger
than the input buffer. This actual value can be obtained from the
auxiliary function <code class="docutils literal notranslate"><span class="pre">min_compress_buffer_size(input_size)</span></code>. If the output
buffer is at least this size, then the input will always be processed
through to the output, barring some error condition. If the output
buffer is smaller than the value specified, there is a chance that the
output will not fit. The status <code class="docutils literal notranslate"><span class="pre">QPL_LARGER_OUTPUT_NEEDED</span></code> will be
returned as a result.</p>
<p>If the compressed output does not fit into the output buffer specified,
the library attempts to copy the input data into the stream as a series
of Stored Blocks. When the Stored Blocks fit, the library returns a
successful status. In case when the Stored Blocks do not fit, the
library returns the <code class="docutils literal notranslate"><span class="pre">QPL_LARGER_OUTPUT_NEEDED</span></code> status. With the output
buffer is at least as large as <code class="docutils literal notranslate"><span class="pre">min_compress_buffer_size(input_size)</span></code>
specifies, then the Stored Blocks will always fit, and the
<code class="docutils literal notranslate"><span class="pre">QPL_LARGER_OUTPUT_NEEDED</span></code> status is not returned.</p>
</section>
<section id="compression-and-decompression-with-canned-mode">
<h2>Compression and Decompression with Canned Mode<a class="headerlink" href="#compression-and-decompression-with-canned-mode" title="Permalink to this headline">#</a></h2>
<p>Compression with canned mode is like static style compression, but no
deflate header will be written to the output stream. To use it:</p>
<ul class="simple">
<li><p>specify the pointer to the Huffman table. It cannot be <em>NULL</em> and must
point to a valid Huffman table.</p></li>
<li><p>specify the <code class="docutils literal notranslate"><span class="pre">QPL_FLAG_CANNED_MODE</span></code> flag.</p></li>
</ul>
<p><strong>Note</strong> that the FIRST job and the LAST job logic remains the same.</p>
<p>This approach is particularly good for compressing the series of small
data, so the compression ratio for every block is expected to be higher.</p>
<p>To decompress such stream, pointer to the decompression table should be
valid and the following combinations of the flags should be set:</p>
<p><code class="docutils literal notranslate"><span class="pre">QPL_FLAG_NO_BUFFERING</span> <span class="pre">|</span> <span class="pre">QPL_FLAG_RND_ACCESS</span> <span class="pre">|</span> <span class="pre">QPL_FLAG_CANNED_MODE</span></code></p>
<p>For better clarity, see canned mode examples.</p>
</section>
<section id="dictionary-compression">
<h2>Dictionary Compression<a class="headerlink" href="#dictionary-compression" title="Permalink to this headline">#</a></h2>
<p>Intel QPL supports compression with preset dictionary by implementing
several auxiliary functions that work with <code class="docutils literal notranslate"><span class="pre">qpl_dictionary</span></code>. For
more information, see the <a class="reference internal" href="../../dev_guide_docs/c_use_cases/c_compress_dictionary.html#c-building-dictionary-reference-link"><span class="std std-ref">Compressing with Preset Dictionary</span></a> chapter.</p>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="c_job_structure.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Job Structure</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="c_compression_styles.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Compression Styles</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Intel<br/>
  
      &copy; Copyright 2022, Intel.<br/>
    <div class="extra_footer">
      <p align="right"><a href="https://www.intel.com/content/www/us/en/privacy/intel-cookie-notice.html">Cookies</a></p>
    </div>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>